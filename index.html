<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ata de Vistoria - Vers√£o Final</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

    <style>
        /* Estilos Gerais e para Celular (Mobile-First) */
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --warning-color: #c82333;
            --light-gray: #f0f2f5;
            --border-color: #d9d9d9;
            --text-color: #333;
            --item-bg-color: #f8f9fa;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            background-color: var(--light-gray);
            color: var(--text-color);
        }

        .container {
            padding: 15px;
            max-width: 800px;
            margin: 0 auto;
        }

        .page-header {
            background-color: #ffffff;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .page-header h1 {
            margin: 0 0 10px 0;
            font-size: 1.6em;
            color: var(--primary-color);
        }

        .page-header .warning-text {
            color: var(--warning-color);
            font-weight: 500;
            font-size: 0.9em;
        }

        form {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        fieldset {
            border: none;
            padding: 0;
            margin: 0;
            margin-bottom: 25px;
        }

        legend {
            font-size: 1.5em;
            font-weight: 600;
            padding-bottom: 15px;
            width: 100%;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .label-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        label,
        .question-text {
            font-weight: 500;
        }

        .help-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--border-color);
            color: var(--text-color);
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            flex-shrink: 0;
        }

        input[type="text"],
        input[type="number"],
        input[type="datetime-local"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1rem;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        input[readonly] {
            background-color: #e9ecef;
            color: #6c757d;
        }

        .coordinates-group {
            display: flex;
            gap: 10px;
            align-items: stretch;
        }

        .action-button {
            width: 100%;
            padding: 15px;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .pdf-button {
            background-color: var(--success-color);
        }

        .add-row-button {
            background-color: var(--info-color);
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .remove-row-button {
            background-color: var(--danger-color);
            padding: 0;
            width: 45px;
            height: 45px;
            font-size: 1.5em;
            flex-shrink: 0;
            margin-top: 0;
        }

        .location-button {
            background-color: #6c757d;
            padding: 0 15px;
            align-self: center;
            height: 48px;
        }

        .selection-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        @media (min-width: 600px) {
            .selection-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
        }

        .radio-item {
            padding-left: 0;
        }

        .checkbox-item input,
        .radio-item input {
            margin-right: 10px;
            width: 1.5em;
            height: 1.5em;
            flex-shrink: 0;
        }

        .checkbox-item label,
        .radio-item label {
            font-weight: normal;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .comodo-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-areas: "nome nome" "qtde piso" "parede teto" "remover remover";
            gap: 10px;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .comodo-row .c-nome {
            grid-area: nome;
        }

        .comodo-row .c-qtde {
            grid-area: qtde;
        }

        .comodo-row .c-piso {
            grid-area: piso;
        }

        .comodo-row .c-parede {
            grid-area: parede;
        }

        .comodo-row .c-teto {
            grid-area: teto;
        }

        .comodo-row .c-remover {
            grid-area: remover;
            align-self: center;
        }

        .comodo-row .form-group {
            margin-bottom: 0;
        }

        @media (min-width: 768px) {
            .comodo-row {
                grid-template-columns: 3fr 1fr 2fr 2fr 2fr auto;
                grid-template-areas: "nome qtde piso parede teto remover";
                align-items: center;
            }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }

        #page-footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px 15px;
            border-top: 1px solid var(--border-color);
            color: #6c757d;
            font-size: 0.9em;
        }

        #page-footer p {
            margin: 5px 0;
        }

        #page-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        #page-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="page-header">
            <h1>ATA DE VISTORIA 1.0</h1>
            <p class="warning-text">ATEN√á√ÉO: OS DADOS A SEGUIR DEVER√ÉO SER PREENCHIDOS COM AS INFORMA√á√ïES OBTIDAS NO
                MOMENTO DA VISTORIA</p>
        </div>

        <form id="vistoriaForm">
            <fieldset>
                <legend>DADOS INICIAIS</legend>
                <div class="form-group">
                    <div class="label-container"><label for="proposta_n">PROPOSTA N¬∫:</label><span class="help-icon"
                            onclick="showHelp('proposta_n')">?</span></div><input type="text" id="proposta_n"
                        name="proposta_n">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="data_hora_vistoria">DATA E HORA DA VISTORIA:</label><span
                            class="help-icon" onclick="showHelp('data_hora_vistoria')">?</span></div><input
                        type="datetime-local" id="data_hora_vistoria" name="data_hora_vistoria">
                </div>
                <div class="form-group">
                    <div class="label-container"><label>COORDENADAS:</label><span class="help-icon"
                            onclick="showHelp('coordenadas')">?</span></div>
                    <div class="coordinates-group"><input type="text" id="latitude" name="latitude"
                            placeholder="Latitude"><input type="text" id="longitude" name="longitude"
                            placeholder="Longitude"><button type="button" class="action-button location-button"
                            onclick="obterLocalizacao()">üìç</button></div>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="vistoriador">VISTORIADOR:</label><span class="help-icon"
                            onclick="showHelp('vistoriador')">?</span></div><input type="text" id="vistoriador"
                        name="vistoriador" value="Sarah Kelly Borcard dos Santos Pereira" readonly>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="cau_crea">CAU/CREA:</label><span class="help-icon"
                            onclick="showHelp('cau_crea')">?</span></div><input type="text" id="cau_crea"
                        name="cau_crea" value="CREA 2025102776" readonly>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="tipo_acompanhante">TIPO DE ACOMPANHANTE:</label><span
                            class="help-icon" onclick="showHelp('tipo_acompanhante')">?</span></div><select
                        id="tipo_acompanhante" name="tipo_acompanhante">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option value="Corretor">Corretor</option>
                        <option value="Propriet√°rio / Construtora">Propriet√°rio / Construtora</option>
                        <option value="Respons√°vel Construtora">Respons√°vel Construtora</option>
                        <option value="Engenheiro da Obra">Engenheiro da Obra</option>
                        <option value="Proponente / Comprador / Garantidor / Mutu√°rio">Proponente / Comprador /
                            Garantidor / Mutu√°rio</option>
                        <option value="Zelador">Zelador</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="nome_acompanhante">NOME DO ACOMPANHANTE:</label><span
                            class="help-icon" onclick="showHelp('nome_acompanhante')">?</span></div><input type="text"
                        id="nome_acompanhante" name="nome_acompanhante">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="contato">CONTATO:</label><span class="help-icon"
                            onclick="showHelp('contato')">?</span></div><input type="text" id="contato" name="contato">
                </div>
            </fieldset>

            <fieldset>
                <legend>ENDERE√áO / LOCALIZA√á√ÉO EXATA DO IM√ìVEL</legend>
                <div class="form-group">
                    <div class="label-container"><label for="endereco">ENDERE√áO:</label><span class="help-icon"
                            onclick="showHelp('endereco')">?</span></div><input type="text" id="endereco"
                        name="endereco">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="numero">N√öMERO:</label><span class="help-icon"
                            onclick="showHelp('numero')">?</span></div><input type="text" id="numero" name="numero">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="bairro">BAIRRO:</label><span class="help-icon"
                            onclick="showHelp('bairro')">?</span></div><input type="text" id="bairro" name="bairro">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="uf">UF:</label><span class="help-icon"
                            onclick="showHelp('uf')">?</span></div><input type="text" id="uf" name="uf" maxlength="2">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="cidade">CIDADE:</label><span class="help-icon"
                            onclick="showHelp('cidade')">?</span></div><input type="text" id="cidade" name="cidade">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="complemento">COMPLEMENTO:</label><span class="help-icon"
                            onclick="showHelp('complemento')">?</span></div><input type="text" id="complemento"
                        name="complemento">
                </div>
            </fieldset>
            <fieldset>
                <legend>CHECK LIST DAS FOTOS</legend>
                <div class="selection-grid">
                    <div class="checkbox-item"><input type="checkbox" id="foto_fachada" name="fotos_checklist"><label
                            for="foto_fachada">Fachada do Im√≥vel</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_placa_rua" name="fotos_checklist"><label
                            for="foto_placa_rua">Placa da Rua</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_apto_torre" name="fotos_checklist"><label
                            for="foto_apto_torre">Identif. do apto. | Torre</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_vias" name="fotos_checklist"><label
                            for="foto_vias">Via √† direta e esquerda do im√≥vel</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_vizinhos" name="fotos_checklist"><label
                            for="foto_vizinhos">Im√≥veis vizinhos</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_condominio" name="fotos_checklist"><label
                            for="foto_condominio">Identifica√ß√£o do condom√≠nio</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_vaga" name="fotos_checklist"><label
                            for="foto_vaga">Vaga de garagem</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_hidrometro" name="fotos_checklist"><label
                            for="foto_hidrometro">Hidr√¥metro</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_quadro_energia"
                            name="fotos_checklist"><label for="foto_quadro_energia">Quadro de energia</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="foto_comodos" name="fotos_checklist"><label
                            for="foto_comodos">Todos os c√¥modos</label></div>
                </div>
            </fieldset>

            <fieldset>
                <legend>CARACTER√çSTICAS DA REGI√ÉO</legend>
                <div class="form-group">
                    <div class="label-container"><label for="uso_predominante">USO PREDOMINANTE:</label><span
                            class="help-icon" onclick="showHelp('uso_predominante')">?</span></div><select
                        id="uso_predominante" name="uso_predominante">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Residencial Unifamiliar</option>
                        <option>Residencial Multifamiliar</option>
                        <option>Comercial</option>
                        <option>Industrial</option>
                        <option>Misto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="padrao_construtivo">PADR√ÉO CONSTRUTIVO DA
                            REGI√ÉO:</label><span class="help-icon" onclick="showHelp('padrao_construtivo')">?</span>
                    </div><select id="padrao_construtivo" name="padrao_construtivo">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Baixo</option>
                        <option>M√©dio</option>
                        <option>Alto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="localizacao">LOCALIZA√á√ÉO:</label><span class="help-icon"
                            onclick="showHelp('localizacao')">?</span></div><select id="localizacao" name="localizacao">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Urbano</option>
                        <option>Suburbano</option>
                        <option>Im√≥vel Rural</option>
                        <option>Favela</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="desenvolvimento_bairro">DESENVOLVIMENTO DO
                            BAIRRO:</label><span class="help-icon" onclick="showHelp('desenvolvimento_bairro')">?</span>
                    </div><select id="desenvolvimento_bairro" name="desenvolvimento_bairro">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Antigo</option>
                        <option>Novo</option>
                        <option>Em Desenvolvimento</option>
                        <option>Em Mudan√ßa de Ocupa√ß√£o</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="trafego">TR√ÅFEGO:</label><span class="help-icon"
                            onclick="showHelp('trafego')">?</span></div><select id="trafego" name="trafego">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Reduzido</option>
                        <option>Moderado</option>
                        <option>Intenso</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="pavimentacao">PAVIMENTA√á√ÉO DA RUA:</label><span
                            class="help-icon" onclick="showHelp('pavimentacao')">?</span></div><select id="pavimentacao"
                        name="pavimentacao">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Asfalto</option>
                        <option>Anti-p√≥</option>
                        <option>Paralelep√≠pedo</option>
                        <option>Terra</option>
                        <option>Lajota</option>
                        <option>Cascalho</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label>INFRAESTRUTURA URBANA:</label><span class="help-icon"
                            onclick="showHelp('infraestrutura')">?</span></div>
                    <div class="selection-grid">
                        <div class="checkbox-item"><input type="checkbox" id="infra_agua"
                                name="infraestrutura_urbana"><label for="infra_agua">√Ågua</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_arborizacao"
                                name="infraestrutura_urbana"><label for="infra_arborizacao">Arboriza√ß√£o</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_esg_sanitario"
                                name="infraestrutura_urbana"><label for="infra_esg_sanitario">Esg. Sanit√°rio</label>
                        </div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_esg_pluvial"
                                name="infraestrutura_urbana"><label for="infra_esg_pluvial">Esg. Pluvial</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_energia"
                                name="infraestrutura_urbana"><label for="infra_energia">Ener. El√©trica</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_telefone"
                                name="infraestrutura_urbana"><label for="infra_telefone">Telefone</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_iluminacao"
                                name="infraestrutura_urbana"><label for="infra_iluminacao">Ilumina√ß√£o</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_gas"
                                name="infraestrutura_urbana"><label for="infra_gas">G√°s Canalizado</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_fossa"
                                name="infraestrutura_urbana"><label for="infra_fossa">Fossa</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="infra_cisterna"
                                name="infraestrutura_urbana"><label for="infra_cisterna">Cisterna/Po√ßo</label></div>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>DADOS DO IM√ìVEL</legend>
                <div class="form-group">
                    <div class="label-container"><label for="area_terreno">√ÅREA DO TERRENO (MEDIDA NA
                            VISTORIA):</label><span class="help-icon" onclick="showHelp('area_terreno')">?</span></div>
                    <input type="text" id="area_terreno" name="area_terreno" placeholder="Ex: 250 m¬≤">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="area_construida">√ÅREA CONSTRU√çDA (MEDIDA NA
                            VISTORIA):</label><span class="help-icon" onclick="showHelp('area_construida')">?</span>
                    </div><input type="text" id="area_construida" name="area_construida" placeholder="Ex: 120 m¬≤">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="topografia">TOPOGRAFIA:</label><span class="help-icon"
                            onclick="showHelp('topografia')">?</span></div><select id="topografia" name="topografia">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Plano</option>
                        <option>Aclive</option>
                        <option>Declive</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="implantacao">IMPLANTA√á√ÉO:</label><span class="help-icon"
                            onclick="showHelp('implantacao')">?</span></div><select id="implantacao" name="implantacao">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Condom√≠nio</option>
                        <option>Isolado</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="tipo_imovel">TIPO DO IM√ìVEL:</label><span class="help-icon"
                            onclick="showHelp('tipo_imovel')">?</span></div><input type="text" id="tipo_imovel"
                        name="tipo_imovel" placeholder="Ex: Casa, Apartamento, Galp√£o">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="uso_imovel">USO DO IM√ìVEL:</label><span class="help-icon"
                            onclick="showHelp('uso_imovel')">?</span></div><select id="uso_imovel" name="uso_imovel">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Residencial</option>
                        <option>Industrial</option>
                        <option>Comercial</option>
                        <option>Misto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="ocupacao">OCUPA√á√ÉO:</label><span class="help-icon"
                            onclick="showHelp('ocupacao')">?</span></div><select id="ocupacao" name="ocupacao">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Ocupado</option>
                        <option>Desabitado</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="acabamento_fachada">ACABAMENTO DA FACHADA:</label><span
                            class="help-icon" onclick="showHelp('acabamento_fachada')">?</span></div><select
                        id="acabamento_fachada" name="acabamento_fachada">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Pintura</option>
                        <option>Cer√¢mica / Pastilhas</option>
                        <option>Granito / M√°rmore</option>
                        <option>Vidro</option>
                        <option>Pintura Texturizada / P√°tina / Stucco</option>
                        <option>Alum√≠nio / L√¢mina de Vidro</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="fechamento_paredes">FECHAMENTO PAREDES /
                            ESTRUTURA:</label><span class="help-icon" onclick="showHelp('fechamento_paredes')">?</span>
                    </div><select id="fechamento_paredes" name="fechamento_paredes">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Alvenaria</option>
                        <option>Drywall</option>
                        <option>Parede de Gesso</option>
                        <option>Madeira</option>
                        <option>Pr√©-Moldado</option>
                        <option>Misto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="esquadrias">ESQUADRIAS:</label><span class="help-icon"
                            onclick="showHelp('esquadrias')">?</span></div><select id="esquadrias" name="esquadrias">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Alum√≠nio</option>
                        <option>Ferro</option>
                        <option>Gesso</option>
                        <option>Madeira</option>
                        <option>PVC / Pl√°stico</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="padrao_acabamento">PADR√ÉO ACABAMENTO:</label><span
                            class="help-icon" onclick="showHelp('padrao_acabamento')">?</span></div><select
                        id="padrao_acabamento" name="padrao_acabamento">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>M√≠nimo</option>
                        <option>Baixo</option>
                        <option>Normal</option>
                        <option>Alto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="estado_conservacao">ESTADO DE CONSERVA√á√ÉO:</label><span
                            class="help-icon" onclick="showHelp('estado_conservacao')">?</span></div><select
                        id="estado_conservacao" name="estado_conservacao">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Novo</option>
                        <option>Bom</option>
                        <option>Regular</option>
                        <option>Ruim</option>
                        <option>Sem Valor</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="idade_aparente">IDADE APARENTE:</label><span
                            class="help-icon" onclick="showHelp('idade_aparente')">?</span></div><input type="text"
                        id="idade_aparente" name="idade_aparente" placeholder="Ex: 10 anos">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="n_andares">N¬∫ DE ANDARES DO AVALIANDO:</label><span
                            class="help-icon" onclick="showHelp('n_andares')">?</span></div><input type="number"
                        id="n_andares" name="n_andares" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="vagas_descobertas">VAGA DE GARAGEM DESCOBERTA:</label><span
                            class="help-icon" onclick="showHelp('vagas_descobertas')">?</span></div><input type="number"
                        id="vagas_descobertas" name="vagas_descobertas" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="vagas_cobertas">VAGA DE GARAGEM COBERTA:</label><span
                            class="help-icon" onclick="showHelp('vagas_cobertas')">?</span></div><input type="number"
                        id="vagas_cobertas" name="vagas_cobertas" min="0">
                </div>
            </fieldset>

            <fieldset>
                <legend>DESCRI√á√ÉO INTERNA DO AVALIANDO</legend>
                <button type="button" class="action-button add-row-button" onclick="adicionarComodo()">+ Adicionar
                    C√¥modo</button>
                <div id="comodosContainer"></div>
            </fieldset>

            <fieldset>
                <legend>DADOS DO CONDOM√çNIO</legend>
                <div class="form-group">
                    <div class="label-container"><label for="n_pavimentos">N¬∫ DE PAVIMENTOS TIPO:</label><span
                            class="help-icon" onclick="showHelp('n_pavimentos')">?</span></div><input type="number"
                        id="n_pavimentos" name="n_pavimentos" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="n_unidades_andar">N¬∫ DE UNIDADES POR ANDAR:</label><span
                            class="help-icon" onclick="showHelp('n_unidades_andar')">?</span></div><input type="number"
                        id="n_unidades_andar" name="n_unidades_andar" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="n_elevadores">N¬∫ DE ELEVADORES:</label><span
                            class="help-icon" onclick="showHelp('n_elevadores')">?</span></div><input type="number"
                        id="n_elevadores" name="n_elevadores" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="n_subsolos">N¬∫ DE SUBSOLOS:</label><span class="help-icon"
                            onclick="showHelp('n_subsolos')">?</span></div><input type="number" id="n_subsolos"
                        name="n_subsolos" min="0">
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="padrao_condominio">PADR√ÉO DO CONDOM√çNIO:</label><span
                            class="help-icon" onclick="showHelp('padrao_condominio')">?</span></div><select
                        id="padrao_condominio" name="padrao_condominio">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Baixo</option>
                        <option>Normal</option>
                        <option>Alto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="estado_condominio">ESTADO DE CONSERVA√á√ÉO DO
                            CONDOM√çNIO:</label><span class="help-icon" onclick="showHelp('estado_condominio')">?</span>
                    </div><select id="estado_condominio" name="estado_condominio">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Bom</option>
                        <option>Regular</option>
                        <option>Ruim</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label for="uso_condominio">USO DO CONDOM√çNIO:</label><span
                            class="help-icon" onclick="showHelp('uso_condominio')">?</span></div><select
                        id="uso_condominio" name="uso_condominio">
                        <option value="" selected disabled>Selecione uma op√ß√£o</option>
                        <option>Residencial</option>
                        <option>Industrial</option>
                        <option>Comercial</option>
                        <option>Misto</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="label-container"><label>INFRAESTRUTURA DO CONDOM√çNIO:</label><span class="help-icon"
                            onclick="showHelp('infra_condominio')">?</span></div>
                    <div class="selection-grid">
                        <div class="checkbox-item"><input type="checkbox" id="cond_playground"
                                name="infra_condominio"><label for="cond_playground">Playground</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_churrasqueira"
                                name="infra_condominio"><label for="cond_churrasqueira">Churrasqueira</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_sauna" name="infra_condominio"><label
                                for="cond_sauna">Sauna</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_gerador"
                                name="infra_condominio"><label for="cond_gerador">Gerador</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_pista_cooper"
                                name="infra_condominio"><label for="cond_pista_cooper">Pista de Cooper</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_piscina"
                                name="infra_condominio"><label for="cond_piscina">Piscina</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_salao_festas"
                                name="infra_condominio"><label for="cond_salao_festas">Sal√£o de Festas</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_sala_jogos"
                                name="infra_condominio"><label for="cond_sala_jogos">Sala de Jogos</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_sala_ginastica"
                                name="infra_condominio"><label for="cond_sala_ginastica">Sala de Gin√°stica</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_loja" name="infra_condominio"><label
                                for="cond_loja">Loja Conveni√™ncia</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_interfone"
                                name="infra_condominio"><label for="cond_interfone">Interfone</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_tv_cabo"
                                name="infra_condominio"><label for="cond_tv_cabo">TV a Cabo</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_lavanderia"
                                name="infra_condominio"><label for="cond_lavanderia">Lavanderia Coletiva</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_quadra"
                                name="infra_condominio"><label for="cond_quadra">Quadra Esportiva</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_tv_satelite"
                                name="infra_condominio"><label for="cond_tv_satelite">TV Sat√©lite</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_deposito"
                                name="infra_condominio"><label for="cond_deposito">Dep√≥sito Individual</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_vigilancia"
                                name="infra_condominio"><label for="cond_vigilancia">Vigil√¢ncia Eletr√¥nica</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="cond_jardins"
                                name="infra_condominio"><label for="cond_jardins">Jardins</label></div>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>QUESTION√ÅRIO - SE A RESPOSTA FOR POSITIVA, REGISTRAR EM FOTOS</legend>
                <div class="form-group"><span class="question-text">O im√≥vel possui identifica√ß√£o num√©rica?</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_id_num_sim" name="q_id_num" value="Sim"><label
                                for="q_id_num_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_id_num_nao" name="q_id_num" value="N√£o"><label
                                for="q_id_num_nao">N√£o</label></div>
                    </div>
                </div>
                <div class="form-group"><span class="question-text">O im√≥vel possui cobertura leve? (Apresentar croqui
                        informando tal √°rea)</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_cob_leve_sim" name="q_cob_leve"
                                value="Sim"><label for="q_cob_leve_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_cob_leve_nao" name="q_cob_leve"
                                value="N√£o"><label for="q_cob_leve_nao">N√£o</label></div>
                    </div>
                </div>
                <div class="form-group"><span class="question-text">O logradouro possui placa de identifica√ß√£o?</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_placa_rua_sim" name="q_placa_rua"
                                value="Sim"><label for="q_placa_rua_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_placa_rua_nao" name="q_placa_rua"
                                value="N√£o"><label for="q_placa_rua_nao">N√£o</label></div>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend>QUESTION√ÅRIO - SE A RESPOSTA FOR POSITIVA, DESCREVER NAS INFOS. COMPLEMENTARES</legend>
                <div class="form-group"><span class="question-text">O im√≥vel possui ind√≠cios de contamina√ß√£o? (Informar
                        tais ind√≠cios)</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_contam_sim" name="q_contam" value="Sim"><label
                                for="q_contam_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_contam_nao" name="q_contam" value="N√£o"><label
                                for="q_contam_nao">N√£o</label></div>
                    </div>
                </div>
                <div class="form-group"><span class="question-text">O im√≥vel est√° unificado a outro im√≥vel?</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_unif_sim" name="q_unif" value="Sim"><label
                                for="q_unif_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_unif_nao" name="q_unif" value="N√£o"><label
                                for="q_unif_nao">N√£o</label></div>
                    </div>
                </div>
                <div class="form-group"><span class="question-text">O im√≥vel possui caracter√≠sticas comerciais?
                        (Informar se √© total ou parcial e quais atividades s√£o exercidas)</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_comerc_sim" name="q_comerc" value="Sim"><label
                                for="q_comerc_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_comerc_nao" name="q_comerc" value="N√£o"><label
                                for="q_comerc_nao">N√£o</label></div>
                    </div>
                </div>
                <div class="form-group"><span class="question-text">Algum c√¥modo n√£o foi poss√≠vel vistoriar? (Informar o
                        motivo e apresentar guia de Vistoria Parcial)</span>
                    <div class="radio-group">
                        <div class="radio-item"><input type="radio" id="q_imposs_sim" name="q_imposs" value="Sim"><label
                                for="q_imposs_sim">Sim</label></div>
                        <div class="radio-item"><input type="radio" id="q_imposs_nao" name="q_imposs" value="N√£o"><label
                                for="q_imposs_nao">N√£o</label></div>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>INFORMA√á√ïES COMPLEMENTARES</legend>
                <div class="form-group">
                    <div class="label-container">
                        <label for="info_complementares">Descreva aqui qualquer observa√ß√£o relevante:</label>
                        <span class="help-icon" onclick="showHelp('info_complementares')">?</span>
                    </div>
                    <textarea id="info_complementares" name="info_complementares" rows="8"></textarea>
                </div>
            </fieldset>

            <button type="button" class="action-button pdf-button" onclick="gerarPDF()">Gerar PDF da Vistoria</button>
        </form>
    </div>

    <template id="comodoTemplate">
        <div class="comodo-row">
            <div class="form-group c-nome"><input type="text" class="comodo-nome" placeholder="C√¥modo"
                    list="comodo-options"><datalist id="comodo-options">
                    <option value="DORMIT√ìRIO"></option>
                    <option value="SU√çTE (DORMIT√ìRIO + WC)"></option>
                    <option value="BANHEIRO SOCIAL"></option>
                    <option value="COZINHA"></option>
                    <option value="√ÅREA DE SERVI√áOS COBERTA"></option>
                </datalist></div>
            <div class="form-group c-qtde"><input type="number" class="comodo-qtde" placeholder="Qtde." min="1"
                    value="1"></div>
            <div class="form-group c-piso"><input type="text" class="comodo-piso" placeholder="Piso"
                    list="piso-options"><datalist id="piso-options">
                    <option value="Cer√¢mica"></option>
                    <option value="Cimento Queimado"></option>
                    <option value="Laminado de Madeira"></option>
                    <option value="M√°rmore"></option>
                    <option value="Granito"></option>
                    <option value="Porcelanato"></option>
                    <option value="Vin√≠lico"></option>
                    <option value="Outros"></option>
                </datalist></div>
            <div class="form-group c-parede"><input type="text" class="comodo-parede" placeholder="Parede/Pintura"
                    list="parede-options"><datalist id="parede-options">
                    <option value="Alvenaria"></option>
                    <option value="Azulejo at√© o teto"></option>
                    <option value="Barra Lisa"></option>
                    <option value="Gesso"></option>
                    <option value="Massa Corrida"></option>
                    <option value="Papel de Parede"></option>
                    <option value="Pintura"></option>
                    <option value="Textura"></option>
                    <option value="Outros"></option>
                </datalist></div>
            <div class="form-group c-teto"><input type="text" class="comodo-teto" placeholder="Teto"
                    list="teto-options"><datalist id="teto-options">
                    <option value="Gesso"></option>
                    <option value="Laje"></option>
                    <option value="Forro de Madeira"></option>
                    <option value="Forro de PVC"></option>
                    <option value="Pintura"></option>
                    <option value="Textura"></option>
                    <option value="Outros"></option>
                </datalist></div>
            <div class="form-group c-remover"><button type="button" class="action-button remove-row-button"
                    onclick="this.closest('.comodo-row').remove()">üóëÔ∏è</button></div>
        </div>
    </template>

    <div class="modal-overlay" id="helpModal">
        <div class="modal-content"><span class="modal-close" onclick="hideHelp()">&times;</span>
            <p id="modalText"></p>
        </div>
    </div>

    <footer id="page-footer">
        <p>
            Desenvolvido por <strong>Jo√£o Paulo</strong><br>
            Especialista em Desenvolvimento
        </p>
        <p>
            <a href="mailto:contato@joaopaulovieira.dev">Contato para Desenvolvimento</a>
        </p>
        <p>&copy; 2025 - Todos os direitos reservados</p>
    </footer>

    <script>
        const helpTexts = {
            'proposta_n': 'Insira o n√∫mero da proposta ou do processo de financiamento/vistoria, se houver.',
            'data_hora_vistoria': 'Selecione a data e o hor√°rio em que a vistoria foi realizada no local.',
            'coordenadas': 'Insira as coordenadas de Latitude e Longitude do im√≥vel. Clique no bot√£o com o √≠cone de localiza√ß√£o para preencher automaticamente com a sua posi√ß√£o atual (requer permiss√£o do navegador).',
            'vistoriador': 'Nome do profissional respons√°vel pela vistoria. Este campo n√£o pode ser alterado.',
            'cau_crea': 'Registro profissional do vistoriador. Campo n√£o alter√°vel.',
            'tipo_acompanhante': 'Escolha na lista a fun√ß√£o da pessoa que acompanhou a vistoria.',
            'nome_acompanhante': 'Digite o nome completo da pessoa que acompanhou a vistoria.',
            'contato': 'Insira o telefone ou e-mail da pessoa que acompanhou a vistoria.',
            'endereco': 'Nome da rua, avenida, etc., do im√≥vel vistoriado.',
            'numero': 'N√∫mero do im√≥vel. Se n√£o houver, indique "S/N".',
            'bairro': 'Bairro onde o im√≥vel est√° localizado.',
            'uf': 'Sigla do estado (Unidade Federativa), por exemplo: RJ, SP.',
            'cidade': 'Cidade onde o im√≥vel est√° localizado.',
            'complemento': 'Informa√ß√µes adicionais como bloco, apartamento, casa, etc.',
            'uso_predominante': 'Selecione o tipo de ocupa√ß√£o mais comum na vizinhan√ßa do im√≥vel.',
            'padrao_construtivo': 'Selecione o padr√£o geral das constru√ß√µes na regi√£o.',
            'localizacao': 'Classifique a localiza√ß√£o do im√≥vel dentro do munic√≠pio.',
            'desenvolvimento_bairro': 'Selecione o est√°gio de desenvolvimento e ocupa√ß√£o do bairro.',
            'trafego': 'Classifique a intensidade do tr√°fego de ve√≠culos na rua do im√≥vel.',
            'pavimentacao': 'Selecione o tipo de cal√ßamento da rua em frente ao im√≥vel.',
            'infraestrutura': 'Marque todos os servi√ßos p√∫blicos e de infraestrutura dispon√≠veis na rua do im√≥vel.',
            'area_terreno': '√Årea total do terreno em metros quadrados (m¬≤), conforme medi√ß√£o ou documento.',
            'area_construida': '√Årea total constru√≠da do im√≥vel em metros quadrados (m¬≤).',
            'topografia': 'Selecione a inclina√ß√£o do terreno.',
            'implantacao': 'Indique se o im√≥vel est√° em um condom√≠nio ou se √© uma unidade isolada na rua.',
            'tipo_imovel': 'Descreva o tipo do im√≥vel (Ex: Casa t√©rrea, Sobrado, Apartamento tipo, Cobertura, Sala comercial).',
            'uso_imovel': 'Selecione o uso principal do im√≥vel vistoriado.',
            'ocupacao': 'Indique se o im√≥vel est√° atualmente ocupado ou n√£o.',
            'acabamento_fachada': 'Selecione o principal material de revestimento da fachada.',
            'fechamento_paredes': 'Selecione o tipo de material usado para construir as paredes e a estrutura.',
            'esquadrias': 'Material predominante das janelas, portas e port√µes.',
            'padrao_acabamento': 'Classifica√ß√£o geral da qualidade dos acabamentos internos do im√≥vel.',
            'estado_conservacao': 'Avalia√ß√£o geral do estado de manuten√ß√£o e conserva√ß√£o do im√≥vel.',
            'idade_aparente': 'Estimativa da idade do im√≥vel em anos.',
            'n_andares': 'N√∫mero total de andares/pavimentos do im√≥vel avaliado.',
            'vagas_descobertas': 'N√∫mero de vagas de garagem sem cobertura.',
            'vagas_cobertas': 'N√∫mero de vagas de garagem com cobertura.',
            'n_pavimentos': 'N√∫mero de andares do pr√©dio (sem contar t√©rreo e subsolos).',
            'n_unidades_andar': 'Quantidade de apartamentos ou unidades por andar.',
            'n_elevadores': 'N√∫mero total de elevadores no condom√≠nio/bloco.',
            'n_subsolos': 'N√∫mero de andares de garagem abaixo do n√≠vel do solo.',
            'padrao_condominio': 'Classifica√ß√£o geral do padr√£o do condom√≠nio.',
            'estado_condominio': 'Estado de conserva√ß√£o das √°reas comuns do condom√≠nio.',
            'uso_condominio': 'Finalidade principal do condom√≠nio.',
            'infra_condominio': 'Marque todos os itens de lazer e infraestrutura que o condom√≠nio oferece.',
            'info_complementares': 'Use este espa√ßo para detalhar respostas dos question√°rios, descrever problemas encontrados, ou qualquer outra informa√ß√£o relevante que n√£o se encaixe nos outros campos.'
        };
        const modalOverlay = document.getElementById('helpModal');
        const modalText = document.getElementById('modalText');
        function showHelp(fieldId) { modalText.textContent = helpTexts[fieldId] || 'Ajuda n√£o encontrada.'; modalOverlay.classList.add('active'); }
        function hideHelp() { modalOverlay.classList.remove('active'); }
        modalOverlay.addEventListener('click', function (event) { if (event.target === modalOverlay) { hideHelp(); } });

        function obterLocalizacao() { if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(function (position) { document.getElementById('latitude').value = position.coords.latitude.toFixed(6); document.getElementById('longitude').value = position.coords.longitude.toFixed(6); }, function () { alert('N√£o foi poss√≠vel obter a localiza√ß√£o. Verifique as permiss√µes do seu navegador.'); }); } else { alert("Geolocaliza√ß√£o n√£o √© suportada por este navegador."); } }

        function adicionarComodo() {
            const template = document.getElementById('comodoTemplate');
            const container = document.getElementById('comodosContainer');
            const clone = template.content.cloneNode(true);
            container.appendChild(clone);
        }

        async function gerarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({ orientation: 'p', unit: 'pt', format: 'a4' });
            let y = 40;
            const x = 40;
            const fieldMargin = 22;
            const sectionMargin = 30;
            let rightColX = x + 240;

            function addPageIfNeeded() { if (y > 780) { doc.addPage(); y = 40; } }
            function addField(label, value) { addPageIfNeeded(); const displayValue = value || 'N√£o preenchido'; doc.setFontSize(10).setFont(undefined, 'bold').text(label, x, y, { maxWidth: rightColX - x - 10 }); doc.setFont(undefined, 'normal').text(displayValue, rightColX, y, { maxWidth: 555 - rightColX }); y += fieldMargin; }
            function addSectionTitle(title) { addPageIfNeeded(); doc.setFontSize(14).setFont(undefined, 'bold').text(title, x, y); y += sectionMargin; }
            function addSeparator() { addPageIfNeeded(); y += fieldMargin / 2; doc.setLineDashPattern([2, 2], 0); doc.line(x, y, 555, y); doc.setLineDashPattern([], 0); y += fieldMargin * 1.5; }
            function getSelectText(id) { const select = document.getElementById(id); return select.selectedIndex > 0 ? select.options[select.selectedIndex].text : ''; }
            function getRadioValue(name) { const radio = document.querySelector(`input[name="${name}"]:checked`); return radio ? radio.value : ''; }

            doc.setFontSize(16).setFont(undefined, 'bold').text('ATA DE VISTORIA 1.0', doc.internal.pageSize.getWidth() / 2, y, { align: 'center' }); y += fieldMargin;
            doc.setFontSize(8).setFont(undefined, 'normal').text('ATEN√á√ÉO: OS DADOS A SEGUIR DEVER√ÉO SER PREENCHIDOS COM AS INFORMA√á√ïES OBTIDAS NO MOMENTO DA VISTORIA', doc.internal.pageSize.getWidth() / 2, y, { align: 'center' }); y += sectionMargin;

            addSectionTitle('DADOS INICIAIS');
            const proposta = document.getElementById('proposta_n').value;
            let dataHoraInput = document.getElementById('data_hora_vistoria').value; let dataHoraFormatada = ''; if (dataHoraInput) { const data = new Date(dataHoraInput); dataHoraFormatada = `${String(data.getDate()).padStart(2, '0')}/${String(data.getMonth() + 1).padStart(2, '0')}/${data.getFullYear()} √†s ${String(data.getHours()).padStart(2, '0')}:${String(data.getMinutes()).padStart(2, '0')}`; }
            const lat = document.getElementById('latitude').value; const lon = document.getElementById('longitude').value; const coordenadas = lat && lon ? `Lat: ${lat}, Lon: ${lon}` : '';
            addField('PROPOSTA N¬∫:', proposta); addField('DATA E HORA DA VISTORIA:', dataHoraFormatada); addField('COORDENADAS:', coordenadas); addField('VISTORIADOR:', document.getElementById('vistoriador').value); addField('CAU/CREA:', document.getElementById('cau_crea').value); addField('TIPO DE ACOMPANHANTE:', getSelectText('tipo_acompanhante')); addField('NOME DO ACOMPANHANTE:', document.getElementById('nome_acompanhante').value); addField('CONTATO:', document.getElementById('contato').value);
            addSeparator();

            addSectionTitle('ENDERE√áO / LOCALIZA√á√ÉO EXATA DO IM√ìVEL');
            addField('ENDERE√áO:', document.getElementById('endereco').value); addField('N√öMERO:', document.getElementById('numero').value); addField('BAIRRO:', document.getElementById('bairro').value); addField('UF:', document.getElementById('uf').value); addField('CIDADE:', document.getElementById('cidade').value); addField('COMPLEMENTO:', document.getElementById('complemento').value);

            y += sectionMargin / 2;
            addSectionTitle('CHECK LIST DAS FOTOS');
            const checkedFotos = [];
            document.querySelectorAll('input[name="fotos_checklist"]:checked').forEach((checkbox) => { checkedFotos.push(checkbox.nextElementSibling.textContent); });
            doc.setFontSize(10).setFont(undefined, 'normal').text(checkedFotos.length > 0 ? checkedFotos.join('; ') : 'Nenhum item marcado.', x, y, { maxWidth: 515 });
            y += fieldMargin;
            addSeparator();

            addSectionTitle('CARACTER√çSTICAS DA REGI√ÉO');
            addField('USO PREDOMINANTE:', getSelectText('uso_predominante')); addField('PADR√ÉO CONSTRUTIVO DA REGI√ÉO:', getSelectText('padrao_construtivo')); addField('LOCALIZA√á√ÉO:', getSelectText('localizacao')); addField('DESENVOLVIMENTO DO BAIRRO:', getSelectText('desenvolvimento_bairro')); addField('TR√ÅFEGO:', getSelectText('trafego')); addField('PAVIMENTA√á√ÉO DA RUA:', getSelectText('pavimentacao'));
            const checkedInfra = [];
            document.querySelectorAll('input[name="infraestrutura_urbana"]:checked').forEach((checkbox) => { checkedInfra.push(checkbox.nextElementSibling.textContent); });
            doc.setFontSize(10).setFont(undefined, 'bold').text('INFRAESTRUTURA URBANA:', x, y);
            doc.setFont(undefined, 'normal').text(checkedInfra.length > 0 ? checkedInfra.join('; ') : 'Nenhum item marcado.', rightColX - 20, y, { maxWidth: 555 - (rightColX - 20) });
            y += fieldMargin;
            addSeparator();

            addSectionTitle('DADOS DO IM√ìVEL');
            addField('√ÅREA DO TERRENO:', document.getElementById('area_terreno').value); addField('√ÅREA CONSTRU√çDA:', document.getElementById('area_construida').value);
            addField('TOPOGRAFIA:', getSelectText('topografia')); addField('IMPLANTA√á√ÉO:', getSelectText('implantacao')); addField('TIPO DO IM√ìVEL:', document.getElementById('tipo_imovel').value);
            addField('USO DO IM√ìVEL:', getSelectText('uso_imovel')); addField('OCUPA√á√ÉO:', getSelectText('ocupacao')); addField('ACABAMENTO DA FACHADA:', getSelectText('acabamento_fachada'));
            addField('FECHAMENTO PAREDES:', getSelectText('fechamento_paredes')); addField('ESQUADRIAS:', getSelectText('esquadrias')); addField('PADR√ÉO ACABAMENTO:', getSelectText('padrao_acabamento'));
            addField('ESTADO DE CONSERVA√á√ÉO:', getSelectText('estado_conservacao')); addField('IDADE APARENTE:', document.getElementById('idade_aparente').value);
            addField('N¬∫ DE ANDARES:', document.getElementById('n_andares').value); addField('VAGAS DESCOBERTAS:', document.getElementById('vagas_descobertas').value);
            addField('VAGAS COBERTAS:', document.getElementById('vagas_cobertas').value);
            addSeparator();

            addSectionTitle('DESCRI√á√ÉO INTERNA DO AVALIANDO');
            const comodosData = [];
            document.querySelectorAll('.comodo-row').forEach(row => {
                comodosData.push([
                    row.querySelector('.comodo-nome').value || '-',
                    row.querySelector('.comodo-qtde').value || '-',
                    row.querySelector('.comodo-piso').value || '-',
                    row.querySelector('.comodo-parede').value || '-',
                    row.querySelector('.comodo-teto').value || '-'
                ]);
            });
            if (comodosData.length > 0) {
                doc.autoTable({
                    head: [['C√îMODO', 'QTDE.', 'PISO', 'PAREDE/PINTURA', 'TETO']],
                    body: comodosData,
                    startY: y,
                    theme: 'grid',
                    headStyles: { fillColor: [0, 86, 179] },
                    styles: { fontSize: 8 },
                    didDrawPage: function (data) { y = data.cursor.y; }
                });
                y = doc.autoTable.previous.finalY + fieldMargin;
            } else { doc.setFontSize(10).setFont(undefined, 'normal').text('Nenhum c√¥modo foi adicionado.', x, y); y += fieldMargin; }
            addSeparator();

            addSectionTitle('DADOS DO CONDOM√çNIO');
            addField('N¬∫ DE PAVIMENTOS TIPO:', document.getElementById('n_pavimentos').value);
            addField('N¬∫ DE UNIDADES POR ANDAR:', document.getElementById('n_unidades_andar').value);
            addField('N¬∫ DE ELEVADORES:', document.getElementById('n_elevadores').value);
            addField('N¬∫ DE SUBSOLOS:', document.getElementById('n_subsolos').value);
            addField('PADR√ÉO DO CONDOM√çNIO:', getSelectText('padrao_condominio'));
            addField('ESTADO DE CONSERVA√á√ÉO:', getSelectText('estado_condominio'));
            addField('USO DO CONDOM√çNIO:', getSelectText('uso_condominio'));
            const checkedInfraCond = [];
            document.querySelectorAll('input[name="infra_condominio"]:checked').forEach((checkbox) => { checkedInfraCond.push(checkbox.nextElementSibling.textContent); });
            doc.setFontSize(10).setFont(undefined, 'bold').text('INFRAESTRUTURA:', x, y);
            doc.setFont(undefined, 'normal').text(checkedInfraCond.length > 0 ? checkedInfraCond.join('; ') : 'Nenhum item marcado.', rightColX - 20, y, { maxWidth: 555 - (rightColX - 20) });
            y += fieldMargin;
            addSeparator();

            addSectionTitle('QUESTION√ÅRIO - REGISTRAR EM FOTOS');
            addField('Im√≥vel possui identifica√ß√£o num√©rica?', getRadioValue('q_id_num'));
            addField('Im√≥vel possui cobertura leve?', getRadioValue('q_cob_leve'));
            addField('Logradouro possui placa de identifica√ß√£o?', getRadioValue('q_placa_rua'));
            addSeparator();

            addSectionTitle('QUESTION√ÅRIO - DESCREVER NAS OBSERVA√á√ïES');
            addField('Im√≥vel possui ind√≠cios de contamina√ß√£o?', getRadioValue('q_contam'));
            addField('Im√≥vel est√° unificado a outro im√≥vel?', getRadioValue('q_unif'));
            addField('Im√≥vel possui caracter√≠sticas comerciais?', getRadioValue('q_comerc'));
            addField('Algum c√¥modo n√£o foi poss√≠vel vistoriar?', getRadioValue('q_imposs'));
            addSeparator();

            addSectionTitle('INFORMA√á√ïES COMPLEMENTARES');
            const infoComp = document.getElementById('info_complementares').value || 'Nenhuma informa√ß√£o complementar adicionada.';
            doc.setFontSize(10).setFont(undefined, 'normal');
            doc.text(infoComp, x, y, { maxWidth: 515 });

            doc.save(`Vistoria_Proposta_${proposta || 'sem_numero'}.pdf`);
        }
    </script>
</body>

</html>